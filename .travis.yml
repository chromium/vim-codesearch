language: generic

before_install:
  - sudo apt-get update -q
  - sudo apt-get install -qq python python3 python-pip python-setuptools python3-setuptools python3-pip
  - eval "$(curl -Ss https://raw.githubusercontent.com/neovim/bot-ci/master/scripts/travis-setup.sh) nightly-x64"
  - sudo pip install neovim
  - sudo pip3 install neovim
  - mkdir deps
  - cd deps && git clone --depth 1 -q https://github.com/google/vroom.git && cd vroom && python3 setup.py build && sudo python3 setup.py install && cd ../..

before_script:
  - python2 -m pip install --user flake8
  - python3 -m pip install --user flake8
  # stop the build if there are Python syntax errors or undefined names
  - python2 -m flake8 . --count --select=E901,E999,F821,F822,F823 --show-source --statistics
  - python3 -m flake8 . --count --select=E901,E999,F821,F822,F823 --show-source --statistics

script: ./run_tests.sh
